@model List<IzinSistemi.Models.Entity.İzinTipi>
@model List<IzinSistemi.Models.Entity.IzinTalebi>

@{
    ViewBag.Title = "IzinTalebi";
    Layout = "~/Views/Shared/Layout.cshtml";
}

<h2>İzin Talep Formu</h2>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

<div style="text-align:center" class="col-md-6">
    <div style="align-items:center" class="card mb-4">
        <h5 class="card-header">Form Controls</h5>
        <div class="card-body demo-vertical-spacing demo-only-element">
            <form class="form-group" method="post" action="IzinTalebi/YeniTalep/">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-floating form-floating-outline mb-4">
                            <select class="form-select" id="exampleFormControlSelect1" aria-label="Default select example">
                                @*@foreach (var item in Model)
                                    {
                                        <option>@item.Tip</option>
                                    }*@
                            </select>
                            <label for="exampleFormControlSelect1">İzin Türü</label>
                        </div>

                        <div class="form-floating form-floating-outline mb-4">

                        </div>

                        <div class="form-floating form-floating-outline mb-4">
                            <input class="form-control" type="text" id="exampleFormControlReadOnlyInput1" placeholder="Readonly input here..." readonly />
                            <label for="exampleFormControlReadOnlyInput1">Read only without value</label>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="date-picker-wrapper">
                            <div class="date-picker-content">
                                <input type="text" id="start-date" placeholder="Başlangıç Tarihi seçiniz...">
                            </div>
                            <div class="date-picker-content">
                                <input type="text" id="end-date" placeholder="Bitiş Tarihi seçiniz...">
                            </div>
                            <div class="date-range-container">
                                <input type="text" id="date-range" readonly>
                                <input type="text" id="day-difference" readonly>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Flatpickr JS ve diğer JavaScript kodları -->
                <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        var startDateInput = document.getElementById('start-date');
                        var endDateInput = document.getElementById('end-date');
                        var dateRangeInput = document.getElementById('date-range');
                        var dayDifferenceInput = document.getElementById('day-difference');

                        var startDatePicker = flatpickr(startDateInput, {
                            dateFormat: 'd/m/Y',
                            onChange: function (selectedDates, dateStr, instance) {
                                endDatePicker.set('minDate', dateStr);
                                updateDateRange();
                            }
                        });

                        var endDatePicker = flatpickr(endDateInput, {
                            dateFormat: 'd/m/Y',
                            onChange: function (selectedDates, dateStr, instance) {
                                startDatePicker.set('maxDate', dateStr);
                                updateDateRange();
                            }
                        });

                        function updateDateRange() {
                            var startDate = startDatePicker.selectedDates[0];
                            var endDate = endDatePicker.selectedDates[0];
                            if (startDate && endDate) {
                                var difference = Math.abs((endDate - startDate) / (1000 * 60 * 60 * 24)); // Gün farkını hesapla ve mutlak değerini al
                                dateRangeInput.value = startDate.toLocaleDateString('tr-TR') + ' - ' + endDate.toLocaleDateString('tr-TR');
                                dayDifferenceInput.value = difference + ' gün';
                            } else {
                                dateRangeInput.value = '';
                                dayDifferenceInput.value = '';
                            }
                        }
                    });
                </script>

                <div class="mb-3">
                    <button class="btn btn-primary d-grid w-100" type="submit">Talep Oluştur</button>
                </div>
            </form>
        </div>
    </div>
</div>


<style>
    body {
        font-family: Arial, sans-serif;
        margin: 20px;
        width: 100%;
    }

    .date-picker-wrapper {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .date-picker-content {
        flex: 1 1 calc(50% - 10px);
        min-width: 200px;
        margin-right: 10px;
    }

    .date-range-container {
        flex: 1 1 calc(50% - 10px);
        min-width: 200px;
    }

    .date-picker-container {
        margin-bottom: 10px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }

    input {
        width: 100%;
        padding: 5px;
        margin-bottom: 10px;
    }

    #date-range {
        width: 100%;
        padding: 5px;
    }
</style>
